##### 缓存一致性：



 		缓存里的数据如何和数据库保存一致，缓存一般不会有强一致性而具备最终一致性。

##### 解决：

###### 双写模式：

​		先改数据库，再改缓存

​		问题：双写模式可能会导致脏数据，既并发情况下存在数据不一致的问题

​		比如：A机器修改完数据库，要写入缓存时挂了或者网络延迟，这时另一台B机器也来执行同样的修改操作，B机器速度快，改完就写入缓存，则缓存中只有B机器的数据

###### 解决：

​		1、加锁

​		2、为缓存设置过期时间

###### 失效模式：

​		当我们修改完数据库中的数据，删除缓存中的数据。等待下次查询主动更新。

 

#### 最终解决:

​		1.加上缓存过期时间+分布式读写锁。

​		2.借用阿里 Canal更新缓存实现强缓存一致性，缺点是又多了一个中间件。

ps:不关心暂时的脏数据尽量不加锁